{% extends 'quick_dj/base.html' %}
{% block content %}
<!-- <a href="{% url 'add-app' %}">Add App</a>
{%for key,value in apps.items%}
{% include 'quick_dj/app.html' with app_name=key models=value.models %}
{%endfor%}


<form action="{% url  'add-app'%}" method="post">
    <label for="app_name">Name</label>
    
    <input type="text" placeholder="Type app name" name="app_name">
    <button type="submit">Submit</button>

</form>

<a href="{%url 'create-app' %}"> Create Apps </a> -->
<div class="d-flex justify-content-center">
    <form action="{% url 'add-app' %}" method="post">
      {% csrf_token %}
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Type app name" name="app_name" required>
        <button class="btn btn-primary" type="submit">
          <i class="fa fa-plus"></i>
        </button>
      </div>
    </form>
  </div>
  
      


  
{%for key,value in apps.items%}

<table class="table">
    <tbody>
      <tr class="text-center">
    {% with app_name=key models=value.models %}
    
        <th colspan="6"> {{ app_name|title }} <a class="text-danger" href="{% url 'delete-app' app_name %}"> <i class="fa fa-trash"></i> </a> </th>
        <form action="{% url  'add-model' app_name %}" method="post">
          {% csrf_token %}
          <div class="form-group">
            <label for="model_name">Name</label>
            <input type="text" class="form-control" placeholder="Type Model name" name="model_name">
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        
      </tr>
      <tr>
        {%for k,v in models.items%}
      
        {%  with model_name=k fields=v.fields %}
        <th colspan="6">class {{model_name}}(models.Model): 
            
        
        </th>
    </tr>
        {%for kk,vv in fields.items %}
        
        {% with field_name=kk options=vv.options type=vv.type %}

        <tr>
            <th class="p-0 px-3 d-table-cell" > <a href="{% url 'delete-field' app_name model_name field_name %}" style="margin-left: 10px;"><i class="fa fa-minus-circle"></i></a> </th>
            <th class="p-0 py-2 d-table-cell">{{field_name}}</th>
            <th class="p-0 py-2 d-table-cell">=</th>
            <th class="p-0 py-2 d-table-cell">{{type}}(</th>
            {%for option in options %}
            <th class="p-0 py-2 d-table-cell">{{option.name}}={{option.value}},</th>
            {%endfor%}
            <th class="p-0 py-2 d-table-cell">)</th>
          </tr>
          {%endwith%}
          {%endfor%}
          <tr>
            <td>{% include 'quick_dj/forms/field_form.html' with model_name=model_name app_name=app_name %}</td>
          </tr>
          <tr>
            <td>{% include 'quick_dj/forms/model_meta_form.html' with model_name=model_name app_name=app_name %}</td>
          </tr>
          {%endwith%}
          
          {%endfor%}
         
          
    </tbody>
  </table>
  {%endwith%}
  {%endfor%}
  <a href="{%url 'create-app' %}"> Create Apps </a>
{% endblock content %}

